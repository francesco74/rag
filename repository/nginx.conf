server {
    listen 80;
    root /data; # This points to the mounted PVC root

    # Location block for the publicly downloadable directory
    location /processed_folders/ {
        # The actual path is: /usr/share/nginx/html/data/downloads/
        
        # Enables directory listing (GUI) for the files
        autoindex on; 
        
        # This is the key: NO authentication required for this path
        auth_basic off; 
        
        # Optional: Set a long cache time for static files
        expires 30d; 
    }

    # Default location to prevent access to other directories
    location / {
        # Returns a 403 Forbidden error for the root and any other path 
        # that doesn't match /downloads/
        deny all;
    }
}
